# 02. Features & Screens

## 1. 画面一覧（Routes）

| パス                   | タイトル              | 概要                                       |
|------------------------|-----------------------|--------------------------------------------|
| `/login`               | ログイン             | Cognito ログイン画面                      |
| `/`                    | ダッシュボード       | 直近の献立と買い物リストへの導線          |
| `/recipes`             | レシピ一覧           | 登録済みレシピの一覧・検索                |
| `/recipes/new`         | レシピ登録           | 新しいレシピの作成                        |
| `/recipes/:id`         | レシピ詳細／編集     | レシピの詳細表示・材料編集                |
| `/menus`               | 献立一覧／編集       | 日付ごとの献立管理                        |
| `/shopping-list`       | 買い物リスト         | 期間指定による材料の集計・チェックリスト |

※ 将来的に画面追加があればここに追記する。

---

## 2. 画面詳細

### 2.1 ログイン画面 `/login`

**目的**

- Cognitoと連携してユーザーを認証し、IDトークンを取得する
- ログイン済みであればダッシュボードへリダイレクト

**主な要素**

- メールアドレス／パスワード入力欄（Hosted UIを使う場合はリンクだけでもOK）
- 「ログイン」ボタン
- ログイン状態のチェック中であることを示すローディング表示

**動作**

- フロントエンド：
    - Hosted UI 使用の場合 → 「ログイン」ボタン押下で Hosted UI へリダイレクト
    - 自前フォームの場合 → Cognito SDK経由で認証APIを叩き、トークンを取得
- ログイン成功時：
    - トークンをブラウザストレージ（localStorage or secure cookie）に保存
    - `/` に遷移

---

### 2.2 ダッシュボード `/`

**目的**

- 「今日（もしくは直近数日）の献立」や「本日の買い物リスト」への入口にする
- よく使う機能へのショートカットをまとめる

**主な要素（MVP想定）**

- 今日の日付と、今日の朝/昼/夜の献立概要
    - 例：
        - 朝：トースト & サラダ
        - 昼：レトルト or 外食（未設定）
        - 夜：鶏の照り焼き
- アクションボタン
    - 「今日の献立を編集」 → `/menus` の対象日へ
    - 「今日の買い物リストを見る」 → `/shopping-list?from=today&to=today`
- レシピ登録ショートカット
    - 「新しいレシピを登録」 → `/recipes/new`

**補足**

- 初期段階ではただのリンク集＋今日の献立概要程度でOK。
- 後から「今週の献立」や「よく作るレシピ」などを追加しても良い。

---

### 2.3 レシピ一覧画面 `/recipes`

**目的**

- 登録済みレシピを一覧表示し、詳細／編集／献立追加へ遷移できるようにする

**主な要素**

- レシピ一覧テーブル or カード
    - 表示項目：
        - レシピ名
        - 出典（本のタイトル＋ページ）
        - 基本人数（baseServings）
- 検索・フィルタ
    - レシピ名キーワード検索（とりあえず部分一致でOK）
    - 出典本で絞り込み（将来対応でもOK）
- アクション
    - 「新規レシピを追加」ボタン → `/recipes/new`
    - 各行の「詳細を見る」 → `/recipes/:id`

---

### 2.4 レシピ登録画面 `/recipes/new`

**目的**

- レシピ本を見ながら、新しいレシピを登録する

**主な項目**

- レシピ基本情報
    - レシピ名（必須）
    - 出典本のタイトル（任意）
    - 出典ページ番号（任意）
    - 基本人数（例：2人分）
- 材料一覧
    - 行を追加／削除できる材料リスト
    - 各行：
        - 食材名
        - 分量（数値 or テキスト）
        - 単位（g, 個, ml, 大さじ、小さじ、少々 など）
        - 備考（「薄切り」「1cm角に切る」など／任意）

**アクション**

- 「保存」ボタン
    - `POST /recipes` API呼び出し
    - 成功時に `/recipes/:id` へ遷移
- 「キャンセル」ボタン
    - `/recipes` へ戻る

---

### 2.5 レシピ詳細／編集画面 `/recipes/:id`

**目的**

- 登録済みレシピの内容を確認し、必要に応じて編集する
- 献立に追加する入口にもなる

**主な要素**

- レシピ情報表示
    - レシピ名
    - 出典本＋ページ
    - 基本人数
- 材料リスト
    - 食材名・分量・単位の一覧
- 編集モード
    - 必要に応じて「編集」ボタンを押下すると編集可能になる（最初から編集モードでもよい）

**アクション**

- 「編集して保存」ボタン
    - `PUT /recipes/:id` を呼び出し
- 「このレシピを献立に追加」ボタン
    - 日付／食事区分／人数を選択する小さなダイアログ or 別画面へ
    - `POST /menus` を呼び出して献立に登録

---

### 2.6 献立一覧／編集画面 `/menus`

**目的**

- 日付ごとの献立を確認・編集する
- レシピとの紐付けを行う

**UIパターン案**

- まずはシンプルに「日付＋リストビュー」でスタートし、  
  余力があればカレンダーUIに拡張する。

**主な要素（リストビュー案）**

- 日付単位のリスト
    - 各日付ごとに「朝・昼・夜」ブロック
    - 各ブロックにはレシピ名（複数可）と人数（servings）を表示
- フィルタ
    - 表示開始日を選択（例：今日、今週の頭）
    - 何日分表示するか（例：7日）

**アクション**

- 日付ごとの「編集」ボタン
    - その日の献立編集モードへ（同画面内 or 日付詳細画面に遷移）
- 献立の編集内容
    - 朝/昼/夜それぞれに「レシピを追加」ボタン
    - 既存レシピを削除
    - 人数（servings）の変更

**バックエンド連携**

- `GET /menus?from=YYYY-MM-DD&to=YYYY-MM-DD`
- `POST /menus`（新規メニュー登録／更新用のAPI設計は後で詳細化）

---

### 2.7 買い物リスト画面 `/shopping-list`

**目的**

- 指定期間の献立から、「必要な材料の合計量」を割り出し、
  **買い物に使えるチェックリストとして表示する**

**主な要素**

- 期間指定フォーム
    - 開始日（from）
    - 終了日（to）
    - 「リストを生成」ボタン
- リスト表示
    - 材料ごとの行（例）：
        - [ ] 玉ねぎ …… 1.5個
        - [ ] 鶏もも肉 …… 400g
        - [ ] 牛乳 …… 300ml
    - 常備品（塩・醤油など）を別枠で表示できると理想（後回しでもOK）

**アクション**

- チェックボックス
    - ユーザー操作のみ（状態は一時的なクライアント側状態でもOK）
    - 必要になればローカルストレージに保存しても良い
- 「条件変更」ボタン
    - 期間を変更して再検索

**バックエンド連携**

- `GET /shopping-list?from=YYYY-MM-DD&to=YYYY-MM-DD`
    - Lambda側で：
        1. 期間内の献立を取得
        2. 対象レシピの材料を取得
        3. 材料名ごとに合算してレスポンスにまとめる

---

## 3. 代表的なユーザーフロー

### 3.1 レシピ登録フロー

1. `/recipes/new` を開く
2. レシピ基本情報を入力
3. 材料を行追加しながら入力
4. 「保存」クリック → `POST /recipes`
5. 正常終了後、`/recipes/:id`（詳細画面）へ遷移

### 3.2 献立作成フロー

1. `/recipes` から、使いたいレシピの詳細画面を開く
2. 「このレシピを献立に追加」を押す
3. ダイアログ or 画面で
    - 日付
    - 食事区分（朝/昼/夜）
    - 人数（servings）
      を指定
4. `POST /menus` を呼び出し
5. `/menus` で当該日付にレシピが反映されているのを確認

### 3.3 買い物リスト利用フロー

1. スーパーへ行く前に `/shopping-list` を開く
2. 期間（例：今日〜明日）を指定して「リストを生成」
3. 表示されたリストをスマホで確認しながら、買ったものからチェックを入れていく
4. 買い忘れ防止に利用する

---

## 4. 今後の拡張余地（メモ）

- レシピに「タグ（和食・洋食・中華など）」を追加して絞り込み
- 材料のカテゴリ（野菜・肉・魚・乳製品など）を表示順に反映
- カレンダーUIでの献立編集
- 週単位テンプレート（「この週のパターンをコピー」など）

※ これらは現時点では実装対象外だが、  
「どの画面にどう載せるか」のイメージだけはここにメモしておく。
